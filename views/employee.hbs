<div class="row">
  <div class="col-sm-3">
    <form class="" id="searchForm" method="POST" action="/employee" novalidate autocomplete="off">
      <input type="text" id="searchInput" name="search" class="form-control form-control-sm" placeholder="ðŸ”Žï¸Ž Search for ..." onchange="submitForm()" value="{{ searchValue }}">
    </form>
  </div>
  <div class="col-sm-2 px-0">
  </div>
  <div class="col-sm-7 text-end">
    <a
      href="/employee/add-employee"
      class="btn btn-primary btn-sm"
      type="button"
    ><i class="bi bi-person-fill-add"></i> Add Employee</a>
  </div>
</div>
<div class="row">
  <div class="col-lg-12 grid-margin stretch-card">
    <div class="card">
      <div class="card-body">

        <div class="table-responsive">
          <table class="table">
            <thead>
              <th scope="col">ID</th>
              <th scope="col">Employee</th>
              <th scope="col">Department</th>
              <th scope="col">Position</th>
              <th scope="col">Rate Class</th>
              <th scope="col">Rate</th>
              <th scope="col">Date Hired</th>
              <th scope="col">Actions</th>
            </thead>
            <tbody>
              {{#each rows}}
                <tr>
                  <td scope="row">{{this.employee_id}}</td>
                  <td>{{this.employee_name}}</td>
                  <td>{{this.department}}</td>
                  <td>{{this.position}}</td>
                  <td>{{this.rate_class}}</td>
                  <td>{{this.salary_rate}}</td>
                  <td>{{this.date_hired}}</td>
                  <td>
                  <div class="d-flex align-self-center">
                    <div class="dropdown pl-1">
                      <button class="btn btn-primary btn-sm p-2" type="button" data-toggle="dropdown"><i
                          class="bi bi-pencil-square"></i></button>
                      <div class="dropdown-menu">
                        <a class="dropdown-item d-flex justify-content-center px-0" href="/employee/edit-employee/{{this.employee_id}}">Alter</a>
                        <div class="dropdown-divider"></div>
                        <form class="dropdown-item mb-0 pb-0 d-flex px-0" action="/employee/delete-employee/{{this.employee_id}}" method="POST" >
                          <button class="dropdown-item d-flex justify-content-center px-0" type="submit">Delete</button>
                        </form>
                      </div>
                    </div>  
                  </div>
                  </td>
                </tr>
              {{/each}}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  function submitForm() {
    document.getElementById('searchForm').submit();
  }
   // Add this script to retain the focus on the input field after form submission
  window.onload = function() {
    const searchValue = "{{ searchValue }}";
    if (searchValue !== "") {
      const searchInput = document.getElementById('searchInput');
      searchInput.focus();
      // Set the selection range to the end of the input value
      searchInput.setSelectionRange(searchValue.length, searchValue.length);
    }
  };
</script>